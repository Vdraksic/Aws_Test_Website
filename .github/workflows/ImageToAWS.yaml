# pushes image to Aws repo

name: AWS build and push

on: workflow_dispatch

jobs:
  build-and-push:

    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3

    - name: upload image to ECR
      uses: appleboy/docker-ecr-action@master
      with:
        access_key: ${{ secrets.AWS_ACCESS_KEY_ID }}
        secret_key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
        repo: ${{ secrets.AWS_REPO }}
        registry: ${{ secrets.AWS_ACC_ID }}dkr.ecr.${{ secrets.AWS_REGION }}.amazonaws.com
        region: ${{ secrets.AWS_REGION }}
        tags: test
        dockerfile: site/dockerfile
        
